<!DOCTYPE html>
<html lang="bg">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Campus Navigator - Навигация в кампуса</title>
    
    <!-- Leaflet - библиотека за интерактивни карти с OpenStreetMap -->
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" />
    <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
    
    <!-- Leaflet Routing Machine - за маршрути по улици -->
    <link rel="stylesheet" href="https://unpkg.com/leaflet-routing-machine@3.2.12/dist/leaflet-routing-machine.css" />
    <script src="https://unpkg.com/leaflet-routing-machine@3.2.12/dist/leaflet-routing-machine.js"></script>
    
    <!-- Нашият CSS файл -->
    <link rel="stylesheet" href="css/style.css">
</head>
<body>
    <!-- HEADER: Заглавие и навигация -->
    <header>
        <div class="header-content">
            <div class="header-title">
                <h1>Campus Navigator</h1>
                <p>Намери най-краткия път между зали в кампуса</p>
            </div>
            <div class="header-auth">
                <!-- Линкове за вход/регистрация (показват се за нелогнати) -->
                <div id="auth-links">
                    <a href="login.php">Вход</a>
                    <a href="register.php">Регистрация</a>
                </div>
                <!-- Информация за потребителя (показва се за логнати) -->
                <div id="user-info" style="display:none;">
                    <span>Здравей, <strong id="username"></strong></span>
                    <button id="logout-btn">Изход</button>
                </div>
            </div>
        </div>
    </header>

    <!-- MAIN: Основно съдържание -->
    <main>
        <!-- Контейнер за картата -->
        <div id="map-container">
            <div id="map"></div>
        </div>

        <!-- Панел за управление (отстрани) -->
        <div id="control-panel">
            <h2>Навигация</h2>
            
            <!-- Избор на начална и крайна точка -->
            <div class="form-group">
                <label for="start-point">Начална точка:</label>
                <select id="start-point">
                    <option value="">-- Избери зала --</option>
                </select>
            </div>

            <div class="form-group">
                <label for="end-point">Крайна точка:</label>
                <select id="end-point">
                    <option value="">-- Избери зала --</option>
                </select>
            </div>

            <!-- Бутон за намиране на път -->
            <button id="find-path-btn">Намери път</button>
            
            <!-- Бутон за добавяне в любими (показва се само за логнати) -->
            <button id="add-favorite-btn" style="display:none;">Добави в любими</button>

            <!-- Резултат -->
            <div id="result">
                <h3>Резултат:</h3>
                <p id="result-text">Избери начална и крайна точка</p>
                <p id="result-distance"></p>
            </div>

            <!-- Секция за любими маршрути -->
            <hr>
            <div id="favorites-section" style="display:none;">
                <h2>❤️ Любими маршрути</h2>
                <ul id="favorites-list"></ul>
            </div>

            <!-- Секция за експорт/импорт -->
            <hr>
            <h2>Данни</h2>
            <button id="export-json-btn">Експорт JSON</button>
            <button id="export-csv-btn">Експорт CSV</button>
            <input type="file" id="import-file" accept=".json,.csv">
            <button id="import-btn">Импорт</button>
        </div>
    </main>

    <!-- JavaScript файлове -->
    <script src="js/graph.js?v=4"></script>
    <script src="js/map.js?v=4"></script>
    <script src="js/app.js?v=4"></script>
</body>
</html>
